<!DOCTYPE html>
<html ng-app="myApp">
<head>

    <meta charset="utf-8">
    <title>文档标题</title>
    <script  src="bower_components/angular/angular.js" type="text/javascript"> </script>
    <script>
    var app = angular.module("myApp", []);
    app.controller('mainCtrl',['$scope','$rootScope',function($scope,$rootScope){
        console.log("run in mainCtrl  $scope,$rootScope",$scope === $rootScope);
        console.log("run in mainCtrl  $scope,$rootScope",$scope);
        $scope.data = {'head':['1','2','3'],
                        'rows':[['a','b','c'],['x','y','z']]
                      }
        $scope.change = function(index){
            console.log(index)
            alert(index)
        }

    }]);
    app.directive("tabShow", function() {
        //var ctrl = function($scope){
        //    console.log("run in ctrl",$scope);
        //}
        //controller:ctrl,

        var _link = function(scope,ele,attr){

            console.log('scope',scope);

            if (attr.change){
                scope.change_flag = true;
            }
            if (attr.delete){
                scope.delete_flag = true;
            }

            scope.mychange=function(index){
                scope.change({index:index});
            }
            scope.mydelete=function(index){
                scope.delete({index:index});
            }

            //  pagination
            if(attr.paging){
                if (! {}.hasOwnProperty.call(scope.paging,'total_items')){
                    scope.paging['total_items'] = 0;
                }
            }
            scope.noPre = function(){
                return scope.paging.page === 1;
            }
            scope.noNex = function(){
                return scope.paging.page === scope.paging.total_pages;
            }
            scope.selectPage = function(page){
                //console.log('selectPage',page);
                //scope.apply(function(){
                //    scope.paging.page = page;
                //});
                scope.paging.page = page;
                scope.search();
            }
            //  pagination  end
        }
        return {
            restrict:'E',
            replace:true,
            scope:{ data:'=',
                    paging:'=',
                    change:'&',
                    delete:'&',
                    search:'&',
                  },
            link:_link,
            templateUrl:'assets/template/ysp-table.html'
            };

});
    </script>
</head>

<body>
    <div ng-controller="mainCtrl">
        <tab-show data="data" change="change(index)">
        </tab-show>
    </div>
</body>

</html>
